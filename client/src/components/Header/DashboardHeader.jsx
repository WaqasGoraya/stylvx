import { useState } from 'react';
import './DashboardHeader.css'
import useLogout from '../../hooks/useLogout';
import { Link } from 'react-router-dom';
import ShowImage from '../Images/ShowImage';
import { useAuth } from '../../context/authContext';

const DashboardHeader = () => {
  const [isActive, setIsActive] = useState(false);
  const [auth,setAuth] = useAuth();
  const logout = useLogout();
  const toggleMenu = () => {
      setIsActive(!isActive);
  };
  return (
    <>
      <header className="header-main">
        <div className="topbar">
          <div className="container">
            <div className="d-flex align-items-center gap-5 justify-content-center justify-content-lg-end flex-wrap">
              <div className="d-flex align-items-center gap-3">
                <div className="flag-sec">
                  <img
                    className="img-fluid me-3"
                    src="/images/us-flage.png"
                    width="25px"
                    height="25px"
                    alt="usFlag"
                  />
                </div>
                <span>AUS</span>
              </div>
              <div className="d-flex align-items-center gap-3 flex-wrap">
                <div className="profiles-sec">
                  <nav>
                    <div className="menu-toggle"></div>
                    <div className="profile" onClick={toggleMenu}>
                      <div className="user d-flex align-items-center gap-2">
                        <div className="img-box">
                        <ShowImage className="img-fluid" alt="user-image" imagePath={auth.user.image || '/uploads/user.png'}/>
                        </div>
                        <span className="prof-name">{`${auth.user.firstname}  ${auth.user.lastname}`}</span>
                      </div>
                      <div className={`menu ${isActive ? 'active' : ''}`}>
                        <ul className="ps-0">
                          <li>
                            <Link to={auth.user.role[0]['name'] == 'admin' ? '/dashboard/admin' : '/dashboard/profile' }>
                              <i className="fa fa-user"></i>&nbsp;Profile
                            </Link>
                          </li>
                          <li>
                            <Link href="#" onClick={logout}>
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="20"
                                height="20"
                                viewBox="0 0 512 512"
                              >
                                <path d="M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 192 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l210.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128zM160 96c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 32C43 32 0 75 0 128L0 384c0 53 43 96 96 96l64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l64 0z" />
                              </svg>
                              &nbsp;Sign Out
                            </Link>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </nav>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div className="navigation-bar-frist my-3">
          <div className="container">
            <div className="main-sec d-flex align-items-center justify-content-between">
              <div className="logo-sec d-flex align-items-center gap-3">
                <button
                  className="btn btn-dark d-block d-lg-none"
                  type="button"
                  data-bs-toggle="offcanvas"
                  data-bs-target="#offcanvasScrolling"
                  aria-controls="offcanvasScrolling"
                >
                  <i className="fa fa-bars"></i>
                </button>
                <div
                  className="offcanvas offcanvas-start"
                  data-bs-scroll="true"
                  data-bs-backdrop="false"
                  tabIndex="-1"
                  id="offcanvasScrolling"
                  aria-labelledby="offcanvasScrollingLabel"
                >
                  <div className="offcanvas-header">
                    <h1
                      className="offcanvas-title fw-bold"
                      id="offcanvasScrollingLabel"
                    >
                      STYLVIX
                    </h1>
                    <button
                      type="button"
                      className="btn-close text-reset"
                      data-bs-dismiss="offcanvas"
                      aria-label="Close"
                    ></button>
                  </div>
                  <div className="offcanvas-body pt-0">
                    <div className="main-sidebar">
                      <ul className="list-unstyled mb-0">
                        <Link
                          className="text-decoration-none fw-bold"
                          to='/dashboard/admin'
                        >
                          <li>Dashboard</li>
                        </Link>
                        <Link
                          className="text-decoration-none fw-bold"
                          to='/dashboard/users'
                        >
                          <li>Users management</li>
                        </Link>
                        <Link
                          className="text-decoration-none fw-bold"
                          to='/dashboard/roles'
                        >
                          <li>Roles and Permissions</li>
                        </Link>
                        <Link
                          className="text-decoration-none fw-bold"
                          to='/dashboard/products'
                        >
                          <li>product management</li>
                        </Link>
                      </ul>
                    </div>
                  </div>
                </div>
                <Link to={auth.user.role[0]['name'] == 'admin' ? '/dashboard/admin' : '/dashboard/profile'}>
                  <svg
                    width="230"
                    height="40"
                    viewBox="0 0 253 41"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M24.5573 0.268228L24.8724 13.2161H23.6979C23.1441 9.96962 21.7786 7.36285 19.6016 5.39583C17.4436 3.40972 15.1042 2.41667 12.5833 2.41667C10.6354 2.41667 9.08854 2.94184 7.94271 3.99219C6.81597 5.02344 6.2526 6.21701 6.2526 7.57292C6.2526 8.43229 6.45313 9.19618 6.85417 9.86458C7.40799 10.7622 8.29601 11.6502 9.51823 12.5286C10.4158 13.1589 12.4878 14.276 15.7344 15.8802C20.2795 18.1146 23.3446 20.2248 24.9297 22.2109C26.4957 24.197 27.2786 26.4696 27.2786 29.0286C27.2786 32.2752 26.0087 35.0729 23.4688 37.4219C20.9479 39.7517 17.7396 40.9167 13.8438 40.9167C12.6215 40.9167 11.4661 40.7925 10.3776 40.5443C9.28906 40.296 7.92361 39.8281 6.28125 39.1406C5.36458 38.7587 4.61024 38.5677 4.01823 38.5677C3.5217 38.5677 2.99653 38.7587 2.44271 39.1406C1.88889 39.5226 1.4401 40.105 1.09635 40.888H0.0364584V26.2214H1.09635C1.93663 30.3464 3.55035 33.4974 5.9375 35.6745C8.34375 37.8325 10.9314 38.9115 13.7005 38.9115C15.8394 38.9115 17.5391 38.329 18.7995 37.1641C20.079 35.9991 20.7188 34.6432 20.7188 33.0964C20.7188 32.1797 20.4705 31.2917 19.974 30.4323C19.4965 29.5729 18.7613 28.7613 17.7682 27.9974C16.7752 27.2144 15.0182 26.2023 12.4974 24.9609C8.96441 23.2231 6.42448 21.7431 4.8776 20.5208C3.33073 19.2986 2.13715 17.9332 1.29688 16.4245C0.475695 14.9158 0.0651042 13.2543 0.0651042 11.4401C0.0651042 8.34635 1.20139 5.71094 3.47396 3.53385C5.74653 1.35677 8.61111 0.268228 12.0677 0.268228C13.3281 0.268228 14.5503 0.421006 15.7344 0.726562C16.6319 0.955728 17.7205 1.38542 19 2.01562C20.2986 2.62674 21.2057 2.93229 21.7214 2.93229C22.2179 2.93229 22.6094 2.77951 22.8958 2.47396C23.1823 2.1684 23.4497 1.43316 23.6979 0.268228H24.5573ZM66.6667 1.15625V11.6693H65.6354C65.0243 9.24392 64.3464 7.50608 63.6016 6.45573C62.8568 5.38628 61.8351 4.53646 60.5365 3.90625C59.8108 3.5625 58.5408 3.39062 56.7266 3.39062H53.8333V33.3542C53.8333 35.3403 53.9384 36.5816 54.1484 37.0781C54.3776 37.5747 54.8073 38.0139 55.4375 38.3958C56.0868 38.7587 56.9653 38.9401 58.0729 38.9401H59.362V40H39.0234V38.9401H40.3125C41.4392 38.9401 42.3464 38.7396 43.0339 38.3385C43.5304 38.0712 43.9219 37.6128 44.2083 36.9635C44.4184 36.5052 44.5234 35.3021 44.5234 33.3542V3.39062H41.7161C39.0998 3.39062 37.1997 3.94444 36.0156 5.05208C34.3542 6.59896 33.3038 8.80469 32.8646 11.6693H31.776V1.15625H66.6667ZM110.495 1.15625V2.21615C109.215 2.38802 108.232 2.76042 107.544 3.33333C106.589 4.13542 105.081 6.32205 103.018 9.89323L94.5964 23.9583V33.3542C94.5964 35.3594 94.7014 36.6102 94.9115 37.1068C95.1215 37.5842 95.5321 38.0139 96.1432 38.3958C96.7734 38.7587 97.6042 38.9401 98.6354 38.9401H100.813V40H79.013V38.9401H81.0469C82.1927 38.9401 83.0998 38.7396 83.7682 38.3385C84.2648 38.0712 84.6563 37.6128 84.9427 36.9635C85.1528 36.5052 85.2578 35.3021 85.2578 33.3542V25.5625L76.1198 8.91927C74.3056 5.63455 73.026 3.70573 72.2813 3.13281C71.5365 2.5408 70.5434 2.23524 69.3021 2.21615V1.15625H87.9219V2.21615H87.0911C85.9644 2.21615 85.1719 2.37847 84.7135 2.70312C84.2743 3.02778 84.0547 3.37153 84.0547 3.73437C84.0547 4.42187 84.8186 6.15017 86.3464 8.91927L93.3646 21.7812L100.354 10.0651C102.092 7.20052 102.961 5.30035 102.961 4.36458C102.961 3.84896 102.713 3.41927 102.216 3.07552C101.567 2.59809 100.373 2.31163 98.6354 2.21615V1.15625H110.495ZM148.221 26.3646L146.76 40H112.271V38.9401H113.56C114.687 38.9401 115.594 38.7396 116.281 38.3385C116.778 38.0712 117.16 37.6128 117.427 36.9635C117.637 36.5052 117.742 35.3021 117.742 33.3542V7.80208C117.742 5.81597 117.637 4.57465 117.427 4.07812C117.217 3.5816 116.787 3.15191 116.138 2.78906C115.508 2.40712 114.648 2.21615 113.56 2.21615H112.271V1.15625H132.982V2.21615H131.292C130.165 2.21615 129.258 2.41667 128.57 2.81771C128.074 3.08507 127.682 3.5434 127.396 4.19271C127.186 4.65104 127.081 5.85417 127.081 7.80208V32.5521C127.081 34.5382 127.195 35.8082 127.424 36.362C127.654 36.8967 128.102 37.2977 128.771 37.5651C129.248 37.737 130.404 37.8229 132.237 37.8229H135.474C137.536 37.8229 139.255 37.4601 140.63 36.7344C142.005 36.0087 143.189 34.8628 144.182 33.2969C145.194 31.7309 146.149 29.4201 147.047 26.3646H148.221ZM186.693 1.15625V2.21615C185.28 2.44531 184.019 3.19965 182.911 4.47917C182.109 5.43403 180.916 7.67795 179.331 11.2109L165.953 40.888H165.008L151.688 10.0078C150.083 6.28385 149.004 4.09722 148.451 3.44792C147.916 2.79861 146.894 2.38802 145.385 2.21615V1.15625H164.005V2.21615H163.375C161.694 2.21615 160.549 2.42621 159.938 2.84635C159.498 3.13281 159.279 3.55295 159.279 4.10677C159.279 4.45052 159.355 4.86111 159.508 5.33854C159.661 5.79687 160.176 7.04774 161.055 9.09115L169.333 28.4271L177.01 11.2109C177.927 9.12934 178.49 7.73524 178.701 7.02865C178.911 6.32205 179.016 5.72049 179.016 5.22396C179.016 4.65104 178.863 4.14496 178.557 3.70573C178.252 3.26649 177.803 2.93229 177.211 2.70312C176.39 2.37847 175.301 2.21615 173.945 2.21615V1.15625H186.693ZM208.807 38.9401V40H188.497V38.9401H189.786C190.913 38.9401 191.82 38.7396 192.508 38.3385C193.004 38.0712 193.386 37.6128 193.654 36.9635C193.864 36.5052 193.969 35.3021 193.969 33.3542V7.80208C193.969 5.81597 193.864 4.57465 193.654 4.07812C193.444 3.5816 193.014 3.15191 192.365 2.78906C191.734 2.40712 190.875 2.21615 189.786 2.21615H188.497V1.15625H208.807V2.21615H207.518C206.391 2.21615 205.484 2.41667 204.797 2.81771C204.3 3.08507 203.909 3.5434 203.622 4.19271C203.412 4.65104 203.307 5.85417 203.307 7.80208V33.3542C203.307 35.3403 203.412 36.5816 203.622 37.0781C203.852 37.5747 204.281 38.0139 204.911 38.3958C205.561 38.7587 206.43 38.9401 207.518 38.9401H208.807ZM234.961 17.2266L245.674 33.125C247.451 35.7604 248.711 37.3646 249.456 37.9375C250.22 38.4913 251.117 38.8255 252.148 38.9401V40H233.214V38.9401C234.722 38.8255 235.696 38.5964 236.135 38.2526C236.575 37.9089 236.794 37.4887 236.794 36.9922C236.794 36.6484 236.727 36.3429 236.594 36.0755C236.326 35.5026 235.658 34.4332 234.589 32.8672L228.917 24.474L222.987 31.7214C221.211 33.9175 220.323 35.4071 220.323 36.1901C220.323 36.7439 220.552 37.2595 221.01 37.737C221.469 38.2144 222.147 38.5582 223.044 38.7682C223.445 38.8828 224.266 38.9401 225.508 38.9401V40H210.583V38.9401C212.283 38.6918 213.62 38.2335 214.594 37.5651C215.873 36.6866 217.659 34.8533 219.951 32.0651L227.656 22.6693L217.773 8.14583C216.15 5.75868 215.224 4.43142 214.995 4.16406C214.479 3.53385 213.973 3.08507 213.477 2.81771C212.98 2.55035 212.293 2.34983 211.414 2.21615V1.15625H230.693V2.21615H229.719C228.611 2.21615 227.838 2.39757 227.398 2.76042C226.959 3.10417 226.74 3.5434 226.74 4.07812C226.74 4.49826 226.806 4.86111 226.94 5.16667L228.917 8.14583L233.729 15.4792L237.826 10.4661C239.926 7.88802 240.977 6.08333 240.977 5.05208C240.977 4.53646 240.824 4.05903 240.518 3.61979C240.232 3.18055 239.812 2.8368 239.258 2.58854C238.704 2.34028 237.845 2.21615 236.68 2.21615V1.15625H250.974V2.21615C249.847 2.23524 248.94 2.37847 248.253 2.64583C247.565 2.8941 246.83 3.37153 246.047 4.07812C245.55 4.53646 244.309 5.9592 242.323 8.34635L234.961 17.2266Z"
                      fill="black"
                    />
                  </svg>
                </Link>
              </div>
              <div className="d-flex align-items-center gap-4">
                <a href="#" className="position-relative">
                  <svg
                    width="18"
                    height="18"
                    viewBox="0 0 24 25"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M11.8293 0.0975342C9.26246 0.0975342 6.80078 1.07899 4.98577 2.826C3.17076 4.573 2.1511 6.94245 2.1511 9.41309V14.3845L0.0767452 19.3797C0.0115498 19.5368 -0.0126601 19.7068 0.00623396 19.875C0.025128 20.0432 0.08655 20.2043 0.185126 20.3443C0.283702 20.4843 0.416428 20.599 0.57169 20.6782C0.726952 20.7574 0.900019 20.7988 1.07575 20.7988H7.52786C7.52786 23.0935 9.44522 24.939 11.8293 24.939C14.2133 24.939 16.1307 23.0935 16.1307 20.7988H22.5828C22.7585 20.7988 22.9316 20.7574 23.0869 20.6782C23.2421 20.599 23.3748 20.4843 23.4734 20.3443C23.572 20.2043 23.6334 20.0432 23.6523 19.875C23.6712 19.7068 23.647 19.5368 23.5818 19.3797L21.5074 14.3845V9.41309C21.5074 6.94245 20.4878 4.573 18.6728 2.826C16.8578 1.07899 14.3961 0.0975342 11.8293 0.0975342ZM13.98 20.7988C13.98 21.9497 13.0251 22.8689 11.8293 22.8689C10.6335 22.8689 9.67857 21.9497 9.67857 20.7988H13.98ZM4.3018 9.41309C4.3018 7.49148 5.09488 5.64858 6.50655 4.28979C7.91822 2.93101 9.83286 2.16766 11.8293 2.16766C13.8257 2.16766 15.7403 2.93101 17.152 4.28979C18.5637 5.64858 19.3567 7.49148 19.3567 9.41309V14.5832C19.3566 14.7147 19.3825 14.8451 19.4331 14.9672L20.9945 18.7286H2.66404L4.22545 14.9672C4.27588 14.8454 4.30179 14.7154 4.3018 14.5843V9.41309Z"
                      fill="black"
                    />
                  </svg>
                  <span className="position-absolute translate-middle badge rounded-pill bg-dark">
                    0<span className="visually-hidden">unread messages</span>
                  </span>
                </a>
                <a href="#" className="position-relative">
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 29 25"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M20.8369 0.0975342C18.2197 0.0975342 15.9282 1.24672 14.4998 3.18922C13.0714 1.24672 10.7799 0.0975342 8.1627 0.0975342C6.07935 0.0999319 4.082 0.946045 2.60884 2.45025C1.13569 3.95445 0.307036 5.99389 0.304688 8.12115C0.304688 17.1801 13.4593 24.5126 14.0195 24.8155C14.1671 24.8966 14.3322 24.939 14.4998 24.939C14.6675 24.939 14.8325 24.8966 14.9802 24.8155C15.5404 24.5126 28.6949 17.1801 28.6949 8.12115C28.6926 5.99389 27.8639 3.95445 26.3908 2.45025C24.9176 0.946045 22.9203 0.0999319 20.8369 0.0975342ZM14.4998 22.719C12.1855 21.342 2.33256 15.0693 2.33256 8.12115C2.33457 6.54295 2.94947 5.02997 4.04239 3.91401C5.13532 2.79805 6.61707 2.1702 8.1627 2.16815C10.6278 2.16815 12.6975 3.50887 13.5619 5.6623C13.6383 5.85219 13.7683 6.0146 13.9353 6.1289C14.1023 6.2432 14.2988 6.30422 14.4998 6.30422C14.7009 6.30422 14.8974 6.2432 15.0644 6.1289C15.2314 6.0146 15.3613 5.85219 15.4377 5.6623C16.3021 3.50498 18.3718 2.16815 20.8369 2.16815C22.3826 2.1702 23.8643 2.79805 24.9572 3.91401C26.0502 5.02997 26.6651 6.54295 26.6671 8.12115C26.6671 15.059 16.8116 21.3407 14.4998 22.719Z"
                      fill="black"
                    />
                  </svg>

                  <span className="position-absolute translate-middle badge rounded-pill bg-dark">
                    0<span className="visually-hidden">unread messages</span>
                  </span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </header>

      <section className="prof-home-screen">
        <div className="container">
          <div className="main-sec d-block d-md-flex text-center text-md-start align-items-center  justify-content-between flex-wrap">
            <div className="align-items-center d-block d-md-flex text-center text-md-start gap-3">
              <div className="prof-image-sec">
              <ShowImage imagePath={auth.user.image || '/uploads/user.png'}/>
              </div>
              <div className="name-sec">
                <h2 className="fw-bold text-uppercase mb-0">Hi, {auth.user.firstname +' '+ auth.user.lastname}</h2>
                <p className="mb-0 grey-color">Welcome to Dashboard</p>
              </div>
            </div>
            <div>
              <button className="dashboard-black-btn mt-3 mt-md-0" onClick={logout}>
                Logout
              </button>
            </div>
          </div>
        </div>
      </section>
    </>
  );
};

export default DashboardHeader;
